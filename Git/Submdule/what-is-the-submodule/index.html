<!DOCTYPE html>
<html lang="ko" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.58.3" />
    <meta name="description" content="Git의 Submodule에 관련된 내용을 정리합니다.">
<meta name="author" content="MSFL">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-83841390-5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-83841390-5');
</script>

    <title>What is the submodule :: [ MSFL-지식 저장소 ]</title>

    
    <link href="/css/nucleus.css?1574856794" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1574856794" rel="stylesheet">
    <link href="/css/hybrid.css?1574856794" rel="stylesheet">
    <link href="/css/featherlight.min.css?1574856794" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1574856794" rel="stylesheet">
    <link href="/css/auto-complete.css?1574856794" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1574856794" rel="stylesheet">
    <link href="/css/theme.css?1574856794" rel="stylesheet">
    <link href="/css/hugo-theme.css?1574856794" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1574856794"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1122795820579236"
     data-ad-slot="8454132912"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
  </head>
  <body class="" data-url="/Git/Submdule/what-is-the-submodule/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">
   <img src="/images/logo.png" alt="[ MSFL-지식 저장소 ]">
   <span>[ MSFL-지식 저장소 ]</span>
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1574856794"></script>
<script type="text/javascript" src="/js/auto-complete.js?1574856794"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1574856794"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/Git/" title="Git" class="dd-item 
        parent
        
        
        ">
      <a href="/Git/">
          <b>1. </b>Git
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/Git/Basics/" title="Basics" class="dd-item 
        
        
        parent
        ">
      <a href="/Git/Basics/">
          Basics
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/Git/Submdule/" title="Submodule" class="dd-item 
        parent
        
        
        ">
      <a href="/Git/Submdule/">
          Submodule
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/Git/Submdule/what-is-the-submodule/" title="What is the submodule" class="dd-item active">
        <a href="/Git/Submdule/what-is-the-submodule/">
        What is the submodule
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/Git/Tips/" title="Tips" class="dd-item 
        
        
        
        ">
      <a href="/Git/Tips/">
          Tips
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/Git/Tips/how-to-change-users/" title="How to Change Users" class="dd-item ">
        <a href="/Git/Tips/how-to-change-users/">
        How to Change Users
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/Cloud/" title="Cloud" class="dd-item 
        
        
        
        ">
      <a href="/Cloud/">
          <b>2. </b>Cloud
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/Cloud/Concepts/" title="Concepts" class="dd-item 
        
        
        
        ">
      <a href="/Cloud/Concepts/">
          Concepts
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/Cloud/Concepts/edge-computing/" title="Edge Computing" class="dd-item ">
        <a href="/Cloud/Concepts/edge-computing/">
        Edge Computing
        <i class="fas fa-check read-icon"></i>
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/Cloud/Docker/" title="Docker" class="dd-item 
        
        
        
        ">
      <a href="/Cloud/Docker/">
          Docker
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/Cloud/Docker/Tips/" title="Tips" class="dd-item 
        
        
        
        ">
      <a href="/Cloud/Docker/Tips/">
          Tips
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/Cloud/Kubernetes/" title="Kubernetes" class="dd-item 
        
        
        
        ">
      <a href="/Cloud/Kubernetes/">
          Kubernetes
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/Dev/" title="Dev" class="dd-item 
        
        
        
        ">
      <a href="/Dev/">
          <b>3. </b>Dev
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/Dev/UI-Framework/" title="" class="dd-item 
        
        
        
        ">
      <a href="/Dev/UI-Framework/">
          
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/Dev/UI-Framework/Vue/" title="" class="dd-item 
        
        
        
        ">
      <a href="/Dev/UI-Framework/Vue/">
          
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/FunnyLab/" title="FunnyLab" class="dd-item 
        
        
        
        ">
      <a href="/FunnyLab/">
          <b>4. </b>FunnyLab
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> </a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <p style="position:absolute;right:5%">
    © 2019 MSFL :: ccambo (Morris Chang)
  </p>
  </br>
  
  <p style="position:absolute;right:5%">
    Powered by
    <a href="//gohugo.io" target="_blank">HUGO</a>
  </p>
  </br>
  <p style="position:absolute;right:5%">
    Theme by
    <a href="//themes.gohugo.io/hugo-theme-learn/" target="_blank">LEARN (Mathieu Cornic)</a>
  </p>
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/'>MSFL</a> > <a href='/Git/'>Git</a> > <a href='/Git/Submdule/'>Submodule</a> > What is the submodule
          
         
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#submodule">Submodule?</a></li>
<li><a href="#사용법-정리">사용법 정리</a>
<ul>
<li><a href="#기본-옵션들">기본 옵션들</a></li>
<li><a href="#main-project와-submodule-project-관계">main project와 submodule project 관계</a></li>
<li><a href="#submodule-추가"><strong>submodule 추가</strong></a></li>
<li><a href="#submodule-상태-확인"><strong>submodule 상태 확인</strong></a></li>
<li><a href="#main-project에서-바라보는-submodule-상태">main project에서 바라보는 submodule 상태</a></li>
<li><a href="#detached-head-문제"><code>Detached HEAD</code> 문제</a></li>
<li><a href="#단축-명령-및-config-설정">단축 명령 및 Config 설정</a></li>
<li><a href="#이미-submodule을-포함하고-있는-repository-활용하기">이미 submodule을 포함하고 있는 Repository 활용하기</a>
<ul>
<li><a href="#clone-and-update-submodules">clone and update submodules</a></li>
<li><a href="#이미-로컬에-submodule이-존재하는-경우-갱신">이미 로컬에 submodule이 존재하는 경우 갱신</a></li>
<li><a href="#commit-and-push-submodules">commit and push submodules</a></li>
</ul></li>
<li><a href="#submodule-제거"><strong>submodule 제거</strong></a></li>
</ul></li>
<li><a href="#참고자료">참고자료</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
<div class="tags">

  <a class="tag-link" href="/tags/Git">Git</a>

  <a class="tag-link" href="/tags/Submodule">Submodule</a>

</div>

        </div>
        
        <div id="body-inner">
          
            <h1>
              
              What is the submodule
            </h1>
          

        




	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1122795820579236"
     data-ad-slot="8454132912"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>





<div class="notices info" ><p>아래의 내용은 정리하면서 검증한 부분도 있지만, 검증이 되지 않고 정리된 내용도 있을 수 있으므로, 반드시 관련된 정보를 추가로 검색하여 검증해야 한다.</p>
</div>


<h2 id="submodule">Submodule?</h2>

<p>Git 프로젝트는 하나의 독립된 라이브러리라고 생각할 수 있다. 따라서 특정 프로젝트를 진행할 때 또 다른 프로젝트를 내부적으로 사용해야하는 경우가 빈번하게 발생할 수 있다. 일반적으로 이런 상황에서는 필요한 라이브러리의 특정 버전을 설치하거나 소스를 복사해서 사용하는 방법을 사용하는데 이에 따른 버전관리나 소스의 변경등에 대한 대처가 만만치 않다.</p>

<p>Git와 Submodule을 사용하면 Git Repository 내에 또 다른 독립적인 Repository를 운영하는 구조를 만들 수 있다. 당연히 각 Repository는 독립적으로 관리된다.</p>


<div class="notices note" ><p>이런 상황이 새로운 것일까?</br>
Node 환경이라면 이미 npm을 이용해서 package를 관리하며 사용하고 있다. 그런데 가져다 쓸 패키지가 git에 repository로만 존재하는 경우라면 어떻게 해야할 까?</br>
이런 상황에 대체하기 위한 것이 submodule이고 정리하면 <font color="darkred"><strong>submodule은 git repository 하위에 다른 git repository를 관리하기 위한 도구</strong></font>라고 생각하면 된다.</br></br>
자세한 내용은 <a href="https://git-scm.com/book/ko/v1/Git-%EB%8F%84%EA%B5%AC-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88">Pro Git</a>의 내용을 참고!</p>
</div>


<h2 id="사용법-정리">사용법 정리</h2>

<h3 id="기본-옵션들">기본 옵션들</h3>

<p>git submodule에 대한 공식 옵션은 다음의 명령으로 확인 가능하다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git submodule --help</code></pre></div>
<h3 id="main-project와-submodule-project-관계">main project와 submodule project 관계</h3>

<p>main project에 submodule을 추가하면 submodule들을 관리하기 위한 <font color="darkred"><strong>.gitmodules</strong></font>파일이 생성되고 여기에 submoudle에 대한 폴더와 repository 정보가 관리되며 main project는 추가된 submodule에 대한 commit point를 바라보고 있게 된다.</p>

<p>따라서 main project와 submodule 간의 처리는 아래와 같은 순서에 주의해야 한다.</p>

<ul>
<li><font color="darkred"><strong>clone / pull / update</strong></font> : 리모트에서 로컬로 데이터를 가져올 경우는 <font color="darkred"><strong>Parent 먼저</strong></font> 처리 후 submodule을 처리해야 한다.</li>
<li><font color="darkred"><strong>commit / push</strong></font> : 로컬 commit과 리모트로 데이터를 전송하는 경우는 <font color="darkred"><strong>submodule 먼저</strong></font> 처리 후 Parent를 처리해야 한다.</li>
</ul>


<div class="notices warning" ><p>main project가 submodule에 대한 commit point를 연계하고 있기 떄문에 위의 순서가 맞지 않으면 잘못된 submodule의 commit point를 바라보게 되므로 문제가 발생할 수 있다.</p>
</div>


<h3 id="submodule-추가"><strong>submodule 추가</strong></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># main project의 root 폴더에서 실행</span>
$ git submodule add <span style="color:#f92672">[</span>-b branch_name<span style="color:#f92672">]</span> &lt;repository address&gt; <span style="color:#f92672">[</span>path<span style="color:#f92672">]</span>
<span style="color:#75715e"># path를 생략하면 현재 경로 밑으로 repository 이름으로 생성된다.</span></code></pre></div>
<p>정상적으로 추가되면 main project 경로에 <code>.gitmodules</code> 파일이 생성되며, 내용은 아래와 같이 구성된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[<span style="color:#a6e22e">submodule</span> <span style="color:#e6db74">&#34;themes/hugo-theme-docdock&#34;</span>]
<span style="color:#a6e22e">path</span> = <span style="color:#a6e22e">themes</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">hugo</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">theme</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">docdock</span>
<span style="color:#a6e22e">url</span> = <span style="color:#a6e22e">https</span><span style="color:#960050;background-color:#1e0010">://</span><span style="color:#a6e22e">github</span>.<span style="color:#a6e22e">com</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">vjeantet</span><span style="color:#960050;background-color:#1e0010">/</span><span style="color:#a6e22e">hugo</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">theme</span><span style="color:#960050;background-color:#1e0010">-</span><span style="color:#a6e22e">docdock</span>.<span style="color:#a6e22e">git</span></code></pre></div>
<p>위와 같이 Root Repository (여기서는 Hugo로 만든 사이트) 를 기준으로 경로와 git repository url이 관리되고 있는 것을 확인할 수 있다.</p>

<p>submodule이 추가된 것은 main project가 변경된 것을 의미하기 때문에 commit을 수행해 줘야 한다. 특정 branch로 지정할 경우는 <code>-b &lt;branch name&gt;</code>을 사용하면 된다. 또한 나중에 submodule에 대한 branch를 설정할 경우는 아래와 같이 처리할 수도 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># main project root 폴더에서 실행</span>
$ git config -f .gitmodules submodule.&lt;submodule path&gt;.branch &lt;branch name&gt;</code></pre></div>
<h3 id="submodule-상태-확인"><strong>submodule 상태 확인</strong></h3>

<p>기본적인 git 상태 확인은 아래의 명령을 사용하며 submodule과 연동해서 사용할 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># main project root 폴더에서 실행</span>

<span style="color:#75715e"># main project 상태 확인</span>
$ git status

<span style="color:#75715e"># submodule 상태 확인</span>
$ git submodule status

<span style="color:#75715e"># main project 상태확인에 submodule 정보 추가해서 보기 설정</span>
$ git config status.submodulesummary <span style="color:#ae81ff">1</span></code></pre></div>
<h3 id="main-project에서-바라보는-submodule-상태">main project에서 바라보는 submodule 상태</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># main project root 폴더에서 실행</span>
$ git diff --cached &lt;submodule path&gt;
new file mode <span style="color:#ae81ff">160000</span>
index <span style="color:#ae81ff">0000000</span>..51dbdcf
--- /dev/null
+++ b/themes/hugo-theme-learn
@@ -0,0 +1 @@
+Subproject commit 51dbdcf4aaef01d02e78a6ea76b2a6fde5842b55</code></pre></div>
<p>위의 내용을 검토해 보면 다음과 같은 특징이 존재한다.</p>

<ul>
<li><strong>mode 160000</strong>은 일반적인 파일이나 디렉토리가 아니라는 의미를 가진다.</li>
<li><strong>Subproject commit 51dbdcf4aaef01d02e78a6ea76b2a6fde5842b55</strong>는 main project가 submodule repository의 51dbdcf4aaef01d02e78a6ea76b2a6fde5842b55 commit 정보를 바라보고 있다는 의미를 가진다.</li>
</ul>

<h3 id="detached-head-문제"><code>Detached HEAD</code> 문제</h3>

<p>Detached HEAD 문제란 <code>submodule update</code> 명령이 수행되면 해당 submodule이 어떤 branch에도 속하지 않는 분리된 HEAD 정보를 가지는 상태를 말하는 것으로 branch를 지정해 줘야 한다. 따라서 아래와 같이 각 단계별 명령을 수행할 때 지정해 주는 것이 좋다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># main project root 폴더에서 실행</span>

<span style="color:#75715e"># 처음 clone할 때</span>
$ git submodule init
$ git submodule udpate
$ git submodule foreach git checkout &lt;branch name&gt;

<span style="color:#75715e"># pull/update할 때</span>
$ git pull
$ git submodule update --remote --merge

<span style="color:#75715e"># push할 때</span>
$ git push --recurse-submodules<span style="color:#f92672">=</span>check</code></pre></div>

<div class="notices info" ><p>git detached HEAD에 대한 내용은 <a href="http://sunphiz.me/wp/archives/2266">정보</a>를 참고하고, submodule과 detached HEAD에 대한 내용은 <a href="https://stackoverflow.com/questions/18770545/why-is-my-git-submodule-head-detached-from-master">정보</a>를 참고하면 된다.</p>
</div>


<h3 id="단축-명령-및-config-설정">단축 명령 및 Config 설정</h3>

<p>위에서 알아본 명령들을 별칭(Alias) 등록을 통해서 단축 명령으로 수행할 수도 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># git sdiff 단축 정의</span>
$ git config alias.sdiff <span style="color:#e6db74">&#39;!&#39;</span><span style="color:#e6db74">&#34;git diff &amp;&amp; submodule foreach &#39;git diff&#39;&#34;</span>
<span style="color:#75715e"># git spush 단축 정의</span>
$ git config alias.spush <span style="color:#e6db74">&#39;push --recurse-submodules=check&#39;</span>
<span style="color:#75715e"># git supdate 단축 정의</span>
$ git config alias.supdate <span style="color:#e6db74">&#39;submodule update --remote --merge&#39;</span></code></pre></div>
<p>main project에 아래와 같이 정보를 설정해 두면 활용하기 쉽다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># login</span>
$ git config credential.helper cache
<span style="color:#75715e"># status</span>
$ git config status.submodulesummary <span style="color:#ae81ff">1</span>
<span style="color:#75715e"># diff</span>
$ git config diff.submodule log</code></pre></div>
<h3 id="이미-submodule을-포함하고-있는-repository-활용하기">이미 submodule을 포함하고 있는 Repository 활용하기</h3>

<h4 id="clone-and-update-submodules">clone and update submodules</h4>

<ul>
<li><p><strong>Parent git project clone</strong> : <code>.gitmodules</code> 파일이 존재하며, 파일내에 어떤 폴더에 어떤 git repository를 사용하는지에 대한 정보를 알 수 있다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git clone &lt;main project repository&gt;</code></pre></div></li>

<li><p><strong>submodule clone</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># clone된 main project root 폴더에서 실행</span>
$ git submodule init      <span style="color:#75715e"># submodule 초기화</span>
$ git submodule update    <span style="color:#75715e"># submodule 갱신(다운로드 - Detached HEAD 상태로 어떤 branch에도 속하지 않는 상태)</span>
$ git submodule foreach git checkout &lt;branch name&gt;   <span style="color:#75715e"># 지정한 branch로 설정</span></code></pre></div></li>
</ul>


<div class="notices note" ><p>위의 clone 과정을 한번에 처리할 수도 있다.</br>
$ git clone &ndash;recurse-submodules &lt;main project repository&gt;</br>
$ git submodule foreach git checkout <branch name></br></br></p>
</div>


<h4 id="이미-로컬에-submodule이-존재하는-경우-갱신">이미 로컬에 submodule이 존재하는 경우 갱신</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git submodule update --remote --merge</code></pre></div>
<h4 id="commit-and-push-submodules">commit and push submodules</h4>

<ul>
<li><p>만일 새로운 branch로 작업하는 경우</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git submodule foreach git checkout -b &lt;feature name&gt;</code></pre></div></li>

<li><p>변경된 코드들 commit</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git submodule foreach git add -A .
$ git submodule foreach git commit -am <span style="color:#e6db74">&#34;commit message&#34;</span>
$ git submodule foreach git checkout &lt;branch name&gt;
$ git submodule foreach git merge &lt;feature name&gt;</code></pre></div></li>

<li><p>push submodules</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git submodule foreach git push</code></pre></div></li>

<li><p>commit and push main project</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git commit -am <span style="color:#e6db74">&#34;commit message&#34;</span>
$ git push --recurse-submodules<span style="color:#f92672">=</span>check</code></pre></div></li>
</ul>

<p>위에서 언급한 것과 같이 push를 할 때는 반드시 submodule들을 먼저 처리하고 main project를 처리해야 한다. 따라서 submodule들이 모두 push되었는지를 확인해야 한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># main project push 전에 root 폴더에서</span>
$ git push --recurse-submodules<span style="color:#f92672">=</span>check     <span style="color:#75715e"># submodule들이 모두 push된 상태인지를 검사하고 확인되면 push 처리</span>
$ git push --recurse-submodules<span style="color:#f92672">=</span>on-demand <span style="color:#75715e"># submodule들을 모두 push하고 성공하면 push 처리</span></code></pre></div>
<p>매번 명령어를 지정해서 처리하는 것을 항상 처리할 수 있도록 하는 것은 설정으로 처리해 두면 된다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git config push.recurseSubmodules check
$ git config push.recurseSubmodules on-demand</code></pre></div>
<h3 id="submodule-제거"><strong>submodule 제거</strong></h3>

<ol>
<li><code>.gitmodules</code> 파일에서 대상 submodule 정보를 삭제한다.</li>

<li><p>변경된 내용을 stage 처리 한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git add .gitmodules</code></pre></div></li>

<li><p><code>.git/config</code> 파일에서 대상 submodule 정보를 삭제한다.</p></li>

<li><p>git 에서 cached 인덱스 정보를 제거한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git rm --cached &lt;path to submodule&gt;   <span style="color:#75715e"># 맨 뒤의 &#39;/&#39;는 사용하지 않는다.</span></code></pre></div></li>

<li><p><code>./git/modules</code> 폴더에서 대상 submodule 폴더 정보를 삭제한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ rm .git/modules/&lt;path to submodule&gt;   <span style="color:#75715e"># 맨 뒤의 &#39;/&#39;는 사용하지 않는다.</span></code></pre></div></li>

<li><p>변경된 내용을 commit 한다.</p></li>

<li><p>제거된 submodule 폴더를 삭제한다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ rm -rf &lt;path to submodule&gt;</code></pre></div></li>
</ol>

<p>위의 내용은 기본적인 git 명령을 사용한 것이고 submodule 명령을 통하면 다음과 같이 더 간단하게 처리가 가능할 수 있다.</p>

<ol>
<li><p>git에서 submodule 관련 정보 삭제</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git submodule deinit &lt;path to submodule&gt;</code></pre></div></li>

<li><p>git에서 submodule 삭제</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ git rm &lt;path to submodule&gt;</code></pre></div></li>

<li><p>변경 내용 commit</p></li>

<li><p>submodule 폴더 삭제</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">$ rm -rf ./git/modules/&lt;path to submodule&gt;</code></pre></div></li>
</ol>

<h2 id="참고자료">참고자료</h2>

<ul>
<li><a href="https://git-scm.com/book/ko/v1/Git-%EB%8F%84%EA%B5%AC-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88">git-scm Book Chapter 6. Git Tools - Submodule</a></li>
<li><a href="https://gist.github.com/myusuf3/7f645819ded92bda6677">How to effectively delete a git submodule</a></li>
</ul>



	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1122795820579236"
     data-ad-slot="8454132912"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


	
	<div id="disqus_thread"></div>
<script>





(function() { 
var d = document, s = d.createElement('script');
s.src = 'https://ccambo-github-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<script id="dsq-count-scr" src="//ccambo-github-io.disqus.com/count.js" async></script>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/Git/Submdule/" title="Submodule"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/Git/Tips/" title="Tips" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1574856794"></script>
    <script src="/js/perfect-scrollbar.min.js?1574856794"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1574856794"></script>
    <script src="/js/jquery.sticky.js?1574856794"></script>
    <script src="/js/featherlight.min.js?1574856794"></script>
    <script src="/js/highlight.pack.js?1574856794"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1574856794"></script>
    <script src="/js/learn.js?1574856794"></script>
    <script src="/js/hugo-learn.js?1574856794"></script>

    <link href="/mermaid/mermaid.css?1574856794" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1574856794"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    
  </body>
</html>

